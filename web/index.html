<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>로이의 영상찾기</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- 로그인 섹션 -->
        <section id="login-section" class="login-section">
            <div class="login-box">
                <h1>로이의 영상찾기</h1>
                <p>YouTube 구독 채널에서 조건에 맞는 영상을 찾아보세요.</p>
                <div id="config-status" class="config-status"></div>
                <button id="btn-setup" class="btn btn-secondary btn-large" style="display:none;">API 설정하기</button>
                <button id="btn-login" class="btn btn-primary btn-large">Google 계정으로 로그인</button>
            </div>
        </section>

        <!-- 검색 섹션 -->
        <section id="search-section" class="search-section" style="display:none;">
            <!-- 상단 컨트롤 바 -->
            <div class="control-bar">
                <div class="control-left">
                    <h1>로이의 영상찾기</h1>
                    <span id="subs-info" class="subs-badge"></span>
                </div>
                <div class="control-right">
                    <button id="btn-load-subs" class="btn btn-sm">채널 불러오기</button>
                    <button id="btn-view-subs" class="btn btn-sm" style="display:none;">목록</button>
                    <button id="btn-refresh-subs" class="btn btn-sm" style="display:none;">새로고침</button>
                    <button id="btn-logout" class="btn btn-sm btn-secondary">로그아웃</button>
                </div>
            </div>

            <!-- 필터 바 (한 줄) -->
            <div class="filter-bar">
                <div class="filter-group">
                    <label class="radio-pill">
                        <input type="radio" name="filter-type" value="normal" checked>
                        <span>일반</span>
                    </label>
                    <label class="radio-pill">
                        <input type="radio" name="filter-type" value="mutation">
                        <span>돌연변이</span>
                    </label>
                </div>

                <div class="filter-inputs" id="normal-filter">
                    <div class="inline-input">
                        <span>구독자</span>
                        <input type="number" id="max-subscribers" value="10000" min="0">
                        <span>이하</span>
                    </div>
                    <div class="inline-input">
                        <span>조회수</span>
                        <input type="number" id="min-views" value="10000" min="0">
                        <span>이상</span>
                    </div>
                </div>

                <div class="filter-inputs" id="mutation-filter" style="display:none;">
                    <div class="inline-input">
                        <span>지수</span>
                        <input type="number" id="mutation-ratio" value="2" min="0" step="0.1">
                        <span>이상</span>
                    </div>
                </div>

                <div class="inline-input">
                    <span>기간</span>
                    <input type="number" id="days-within" value="15" min="1" max="30">
                    <span>일</span>
                </div>

                <button id="btn-search" class="btn btn-primary" disabled>검색</button>
            </div>

            <!-- 진행 바 -->
            <div id="progress-section" class="progress-section" style="display:none;">
                <div class="progress-bar">
                    <div id="progress-fill" class="progress-fill"></div>
                </div>
                <span id="progress-text" class="progress-text">준비 중...</span>
            </div>

            <!-- 검색 결과 -->
            <div id="results-section" class="results-section" style="display:none;">
                <div class="results-header">
                    <span>결과 <strong id="results-count"></strong></span>
                    <span id="results-stats" class="results-stats"></span>
                </div>
                <div id="results-list" class="results-list"></div>
            </div>
        </section>
    </div>

    <!-- 구독 채널 목록 팝업 -->
    <div id="subs-modal" class="modal" style="display:none;">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>구독 채널 목록 <span id="subs-modal-count"></span></h2>
                <button id="btn-close-subs-modal" class="btn-close">&times;</button>
            </div>
            <div class="modal-body">
                <div id="subs-list" class="subs-list"></div>
            </div>
        </div>
    </div>

    <!-- API 설정 팝업 -->
    <div id="setup-modal" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>API 설정</h2>
                <button id="btn-close-setup-modal" class="btn-close">&times;</button>
            </div>
            <div class="modal-body">
                <p class="setup-guide">
                    <a href="https://console.cloud.google.com/apis/credentials" target="_blank">Google Cloud Console</a>에서
                    OAuth 2.0 클라이언트 ID를 생성하고 아래에 입력하세요.
                </p>
                <div class="form-group">
                    <label>Client ID <span class="required">*</span></label>
                    <input type="text" id="input-client-id" placeholder="xxxxx.apps.googleusercontent.com">
                </div>
                <div class="form-group">
                    <label>Client Secret <span class="required">*</span></label>
                    <input type="text" id="input-client-secret" placeholder="GOCSPX-xxxxx">
                </div>
                <div class="form-group">
                    <label>API Key <span class="optional">(선택)</span></label>
                    <input type="text" id="input-api-key" placeholder="AIzaSy-xxxxx">
                </div>
                <button id="btn-save-config" class="btn btn-primary btn-large">저장</button>
            </div>
        </div>
    </div>

    <script src="/eel.js"></script>
    <script src="script.js"></script>
</body>
</html>
